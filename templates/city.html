{% extends "base.html" %}

{% block title %}О Рубцовске - {{ super() }}{% endblock %}

{% block extra_css %}
<style>
    .city-page .lead {
        font-size: 1.25rem;
    }
    .city-page .card-text {
        font-size: 1.1rem;
    }
    .city-page .list-group-item {
        font-size: 1.1rem;
    }
    .city-page .blockquote p {
        font-size: 1.2rem;
    }
    .city-page .blockquote-footer {
        font-size: 1rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="city-page">
    <div class="row">
        <div class="col-lg-8">
            <!-- Заголовок -->
            <div class="text-center mb-5">
                <h1 class="display-4 text-success fw-bold">Рубцовск</h1>
                <p class="lead">Город в Алтайском крае с богатой историей и перспективным будущим</p>
            </div>

            <!-- Информационные карточки -->
            <div class="row mb-5">
                <div class="col-md-4 mb-4">
                    <div class="card border-0 shadow-sm h-100">
                        <div class="card-body text-center">
                            <i class="bi bi-buildings display-4 text-success mb-3"></i>
                            <h4 class="card-title">Основан</h4>
                            <h2 class="text-success">1892</h2>
                            <p class="card-text">Как посёлок Рубцово при станции Алтайской железной дороги</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card border-0 shadow-sm h-100">
                        <div class="card-body text-center">
                            <i class="bi bi-people display-4 text-success mb-3"></i>
                            <h4 class="card-title">Население</h4>
                            <h2 class="text-success">146 000+</h2>
                            <p class="card-text">Третий по численности населения город Алтайского края</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card border-0 shadow-sm h-100">
                        <div class="card-body text-center">
                            <i class="bi bi-geo-alt display-4 text-success mb-3"></i>
                            <h4 class="card-title">Площадь</h4>
                            <h2 class="text-success">84 км²</h2>
                            <p class="card-text">Расположен на юго-западе Алтайского края, на реке Алей</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- История -->
            <div class="card mb-4 border-0 shadow-sm">
                <div class="card-header bg-success text-white">
                    <h4 class="mb-0"><i class="bi bi-clock-history me-2"></i>Историческая справка</h4>
                </div>
                <div class="card-body">
                    <p>Рубцовск был основан в 1892 году как небольшой железнодорожный посёлок. Своё развитие получил благодаря строительству Алтайской железной дороги. Статус города получил в 1927 году.</p>
                    <p>Во время Великой Отечественной войны в Рубцовск были эвакуированы промышленные предприятия из западных регионов страны, что дало мощный импульс развитию города. Здесь был размещён Харьковский тракторный завод, на базе которого вырос знаменитый Алтайский тракторный завод.</p>
                    <p>В послевоенные годы город стал одним из важнейших промышленных центров Алтайского края.</p>
                </div>
            </div>

            <!-- Достопримечательности -->
            <div class="card mb-4 border-0 shadow-sm">
                <div class="card-header bg-success text-white">
                    <h4 class="mb-0"><i class="bi bi-star me-2"></i>Знаковые места</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h5 class="text-success">Мемориал Славы</h5>
                            <p>Монумент в честь рубцовчан, погибших в годы Великой Отечественной войны. Центральное место городской памяти.</p>
                        </div>
                        <div class="col-md-6">
                            <h5 class="text-success">Парк культуры и отдыха</h5>
                            <p>Крупнейший зелёный массив в центре города. Любимое место отдыха горожан всех возрастов.</p>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <h5 class="text-success">Драматический театр</h5>
                            <p>Рубцовский драматический театр - культурный центр города, представляющий спектакли и мероприятия.</p>
                        </div>
                        <div class="col-md-6">
                            <h5 class="text-success">Набережная реки Алей</h5>
                            <p>Живописное место для прогулок с видом на главную водную артерию города.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Природа и экология -->
            <div class="card mb-4 border-0 shadow-sm">
                <div class="card-header bg-success text-white">
                    <h4 class="mb-0"><i class="bi bi-tree me-2"></i>Природные особенности</h4>
                </div>
                <div class="card-body">
                    <p>Рубцовск расположен в степной зоне, на левом берегу реки Алей. Климат континентальный с холодной зимой и тёплым летом.</p>
                    <p>В окрестностях города находятся:</p>
                    <ul>
                        <li><strong>Алейское водохранилище</strong> - важный источник водоснабжения</li>
                        <li><strong>Рубцовская лесополоса</strong> - искусственные лесные насаждения</li>
                        <li><strong>Степные участки</strong> с уникальной флорой и фауной</li>
                    </ul>
                    <p>Город активно работает над озеленением и созданием комфортной городской среды для жителей.</p>
                </div>
            </div>
        </div>

        <!-- Боковая панель -->
        <div class="col-lg-4">
            <!-- Интересные факты -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-lightbulb me-2"></i>Интересные факты</h5>
                </div>
                <div class="card-body">
                    <div class="d-flex mb-3">
                        <div class="flex-shrink-0">
                            <i class="bi bi-train-front text-success fs-4"></i>
                        </div>
                        <div class="flex-grow-1 ms-3">
                            <h6>Железнодорожный узел</h6>
                            <p class="small mb-0">Рубцовск - важный железнодорожный узел на линии, связывающей Россию с Казахстаном.</p>
                        </div>
                    </div>
                    <div class="d-flex mb-3">
                        <div class="flex-shrink-0">
                            <i class="bi bi-industry text-success fs-4"></i>
                        </div>
                        <div class="flex-grow-1 ms-3">
                            <h6>Промышленный центр</h6>
                            <p class="small mb-0">В советское время город был известен как "тракторная столица" Сибири.</p>
                        </div>
                    </div>
                    <div class="d-flex mb-3">
                        <div class="flex-shrink-0">
                            <i class="bi bi-flower1 text-success fs-4"></i>
                        </div>
                        <div class="flex-grow-1 ms-3">
                            <h6>Город-сад</h6>
                            <p class="small mb-0">Рубцовск активно участвует в программах озеленения и благоустройства.</p>
                        </div>
                    </div>
                    <div class="d-flex">
                        <div class="flex-shrink-0">
                            <i class="bi bi-heart text-success fs-4"></i>
                        </div>
                        <div class="flex-grow-1 ms-3">
                            <h6>Активные горожане</h6>
                            <p class="small mb-0">Жители Рубцовска активно участвуют в городских мероприятиях и экологических инициативах.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Статистика -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="bi bi-bar-chart me-2"></i>Город в цифрах</h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <h6>Промышленность</h6>
                        <div class="progress mb-2" style="height: 20px;">
                            <div class="progress-bar bg-success" style="width: 85%">85%</div>
                        </div>
                        <small>Машиностроение и металлообработка</small>
                    </div>
                    <div class="mb-3">
                        <h6>Зелёные зоны</h6>
                        <div class="progress mb-2" style="height: 20px;">
                            <div class="progress-bar bg-success" style="width: 65%">65%</div>
                        </div>
                        <small>Парки и скверы от общей площади</small>
                    </div>
                    <div class="mb-3">
                        <h6>Молодёжь</h6>
                        <div class="progress mb-2" style="height: 20px;">
                            <div class="progress-bar bg-success" style="width: 40%">40%</div>
                        </div>
                        <small>Жители младше 35 лет</small>
                    </div>
                </div>
            </div>

            <!-- Цитата (обновлено) -->
            <div class="card border-0 shadow-sm bg-light">
                <div class="card-body text-center">
                    <i class="bi bi-chat-quote text-success display-4 mb-3"></i>
                    <blockquote class="blockquote">
                        <p class="mb-0">"Рубцовск - это город с большой историей и светлым будущем. Здесь живут трудолюбивые и добрые люди, которые любят свой город и стремятся сделать его лучше с каждым днём."</p>
                    </blockquote>
                    <footer class="blockquote-footer mt-2">Дмитрий Фельдман, глава города Рубцовска</footer>
                </div>
            </div>

            <!-- Призыв к действию -->
            <div class="card border-0 shadow-sm mt-4" style="border: 2px solid #28a745 !important;">
                <div class="card-body text-center">
                    <i class="bi bi-megaphone text-success display-4 mb-3"></i>
                    <h5 class="card-title">Присоединяйтесь к развитию!</h5>
                    <p class="card-text">Предлагайте идеи, участвуйте в обсуждениях и голосуйте за лучшие проекты благоустройства Рубцовска.</p>
                    {% if current_user.is_authenticated %}
                        <a href="#" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addIdeaModal">
                            <i class="bi bi-plus-circle"></i> Предложить идею
                        </a>
                    {% else %}
                        <a href="{{ url_for('register') }}" class="btn btn-success">
                            <i class="bi bi-person-plus"></i> Зарегистрироваться
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Карта города -->
    <div class="row mt-5">
        <div class="col-12">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-success text-white">
                    <h4 class="mb-0"><i class="bi bi-map me-2"></i>Рубцовск на карте</h4>
                </div>
                <div class="card-body p-0">
                    <div id="cityMap" style="height: 400px; border-radius: 0 0 8px 8px;"></div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Инициализация карты Рубцовска
    const cityMap = L.map('cityMap').setView([51.527623, 81.217673], 13);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap'
    }).addTo(cityMap);

    // Добавляем основные достопримечательности
    const landmarks = [
        {
            name: "Центр города",
            coords: [51.527623, 81.217673],
            description: "Административный и культурный центр"
        },
        {
            name: "Парк культуры и отдыха",
            coords: [51.529, 81.215],
            description: "Главный зелёный массив города"
        },
        {
            name: "Мемориал Славы",
            coords: [51.526, 81.222],
            description: "Монумент в честь героев ВОВ"
        },
        {
            name: "Драматический театр",
            coords: [51.530, 81.210],
            description: "Культурный центр города"
        },
        {
            name: "Набережная реки Алей",
            coords: [51.525, 81.230],
            description: "Живописное место для прогулок"
        }
    ];

    landmarks.forEach(landmark => {
        L.marker(landmark.coords)
            .addTo(cityMap)
            .bindPopup(`<strong>${landmark.name}</strong><br>${landmark.description}`);
    });
});
</script>
{% endblock %}
